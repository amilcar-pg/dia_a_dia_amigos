---
title: "Dia-a-dia de um amigo do Amilcar"
subtitle: "Uma an√°lise <s>in</s>√∫til sobre o amigo m√©dio do Amilcar"
author: "Amilcar L. do Prado G. Gramacho"
institute: "curso-R: Curso de visualiza√ß√£o de Dados"
date: "27/05/2022 (Atualizado: `r Sys.Date()`)"
output:
  xaringan::moon_reader:
    css: [default, custom.css, metropolis-fonts]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false

---

```{r importando_dados_pacotes, include=FALSE}

source("03_importando_dados.R")

library(ggplot2)

```

# Introdu√ß√£o

## Ol√°! Eu sou o Amilcar!

Finalizei o curso de visualiza√ß√£o de dados da curso-R e montei esta apresenta√ß√£o como parte do trabalho final.

Ao inv√©s de utilizar a base de dados proposta pelo curso, optei por coletar dados sobre o dia-a-dia de alguns de meus amigos, por trazer um tom talvez um pouco mais c√¥mico ao contexto.

--

## Sobre o projeto

Inicialmente, acreditei que conseguiria replicar o gr√°fico ["A Day in the Life of Americans"](https://flowingdata.com/2015/12/15/a-day-in-the-life-of-americans/), mas depois de duas semanas de pesquisas intensas, precisei me adaptar √† realidade do R sem o D3 para conseguir pelo menos apresentar algum tipo de gr√°fico neste trabalho e concorrer √† bolsa proposta.

Sendo assim, a apresenta√ß√£o descrever√° um pouco do dia-a-dia de um amigo m√©dio do Amilcar (tamb√©m conhecidos como meus amigos), e concluir√° com o mais pr√≥ximo que eu consegui chegar do gr√°fico que me motivou.
---
# Metodologia

## Coleta
Foi criada uma [planilha do google sheets](https://docs.google.com/spreadsheets/d/1Dx9Za-b1hqeiKso1E067M1BgF6VhdbGyz9FZJC662Sk/edit#gid=2051768494), onde as atividades foram previamente selecionadas por mim, para evitar a necessidade de um trabalho extensivo de limpeza de dados.

Ciente do qu√£o intrometido eu j√° estava sendo ao pedir para meus amigos que me informassem o que faziam a cada parte do seu dia, optei por manter o intervalo de 15 minutos entre uma atividade e outra, por acreditar que j√° seria o suficiente para alcan√ßar meu objetivo.

--

## An√°lise

Uma vez com os dados em m√£os, me debrucei sobre o desafio de recriar o gr√°fico mencionado anteriormente e ap√≥s falhar miseravelmente percebi que precisava fazer algo mais para entregar como trabalho final. Sendo assim, para manter as amizades e poup√°-las de preencher outra planilha ou formul√°rio, optei por tentar extrair o m√°ximo de informa√ß√µes poss√≠veis do que j√° havia coletado.

---
class: inverse, center, middle

# Uma an√°lise geral...

---

# O tempo gasto em cada atividade

.center[
```{r echo=FALSE}
df_boxplot <- df_people |> 
  tidyr::pivot_longer(-c(amigo),
                      names_to = "atividade",
                      values_to = "tempo")

df_boxplot |> 
  ggplot(aes(x = atividade, y = tempo, fill = atividade)) +
  geom_boxplot() +
  labs(title = "Distribui√ß√£o do tempo gasto em cada atividade",
    x = NULL, y = "Unidades de tempo", fill = NULL,
    caption = "1 unidade de tempo corresponde a 15 minutos") +
  theme(legend.position = "none",
        axis.text.x = element_text(angle = 90),
        plot.title = element_text(hjust = 0.5,
                                  size = 16),
        panel.background = element_rect(fill = "#FAFAFA"),
        plot.background = element_rect(fill = "#FAFAFA"),
        panel.grid.major = element_line(colour = "gray70"))
```
]
---

# O tempo gasto em cada atividade

<br><br><br><br>
Os boxplots que acabamos de mostrar nos permitem observar que, de um modo geral, meus amigos n√£o possuem h√°bitos t√£o distantes a ponto de conseguirmos identificar outliers em todas as atividades selecionadas.

√â claro que vemos algu√©m que faz mais atividades dom√©sticas do que o restante,  outros que dormem bastante, e at√© mesmo um ser que j√° n√£o liga para a pr√≥pria sa√∫de mental e passa quase 10 horas do seu dia apenas estudando, al√©m de outra pessoa se mostrar mais limpinha que o restante. Mas de modo geral, eu realmente imaginava que os dados fossem dar resultados muito mais dispersos (obrigado amigos sedent√°rios por n√£o fazerem tanta atividade f√≠sica ‚ù§Ô∏è).

---

# O tempo gasto em cada atividade

.center[
```{r echo=FALSE}
barplot <- ggplot(df_activities) +
  aes(y = value, x = n, fill = value) +
  geom_col() +
  scale_x_continuous(
    limits = c(0,1000)
  ) +
  scale_fill_hue(direction = 1) +
  labs(
    y = NULL,
    x = "Unidades de tempo",
    title = "Soma do tempo gasto por atividade",
    caption = "1 unidade de tempo corresponde a 15 minutos"
  ) +
  theme(legend.position = "none",
        axis.text.x = element_text(angle = 90),
        plot.title = element_text(hjust = 0.5,
                                  size = 16),
        panel.background = element_rect(fill = "#FAFAFA"),
        plot.background = element_rect(fill = "#FAFAFA"),
        panel.grid.major = element_line(colour = "gray70")) +
  geom_text(aes(label = hora),
            hjust = -0.5)

barplot

# barplot + 
#   scale_y_discrete(
#     name = NULL,
#     labels = glue::glue("<img src = '{df_activities$img}'>")
#   ) + 
#   theme(
#     axis.text.y = ggtext::element_markdown()
#   )

# tentativa falha de inserir imagem no nome da linha
```
]
---

# O tempo gasto em cada atividade

<br><br><br>

Acredito que o resultado observado se encaixa no que eu esperava observar. Isto √©, todo mundo necessariamente dorme, ent√£o logicamente deveria ser a categoria com mais tempo gasto.

O segundo e terceiro lugar podem terem sido influenciados pelo momento em que fa√ßo a pesquisa, j√° que √© per√≠odo de recesso em algumas universidades, e parte dos participantes s√£o universit√°rios.

Fico feliz em ver o "lazer" logo ali! Me mostra que minhas amizades tem algum n√≠vel de preocupa√ß√£o consigo mesmas üçæ

---
# H√° rela√ß√£o entre as atividades?

```{r echo=FALSE, fig.align='center'}
corplot <- ggplot(melted_cormat, aes(Atividade1, Atividade2, fill = value))+
  geom_tile(color = "white")+
  scale_fill_distiller(palette = "Oranges", direction = 1) +
  labs(title = "Correla√ß√£o entre as atividades",
       x = NULL, y = NULL) +
  theme(axis.text.x = element_text(angle = 90),
        plot.title = element_text(hjust = 0.5,
                                  size = 16),
        panel.background = element_rect(fill = "#FAFAFA"),
        plot.background = element_rect(fill = "#FAFAFA"),
        panel.grid.major = element_line(colour = "gray70"))

shiny::div(
plotly::ggplotly(corplot,
                 width = 600,
                 height = 550),
align = "center")
```

---

# H√° rela√ß√£o entre as atividades?

<br><br>

Como podemos verificar no gr√°fico de correla√ß√£o plotado, a pesquisa n√£o demonstrou grande n√≠vel de correla√ß√£o entre as atividades selecionadas. Isso pode se dever a v√°rios motivos, mas destaco aqui a falta de rigor metodol√≥gico, j√° que n√£o h√° nenhum objetivo acad√™mico por tr√°s disso.

Uma pe√ßa que se destaca no gr√°fico √© a rela√ß√£o entre trabalho e estudo. Aparentemente h√° quase 72% de rela√ß√£o negativa entre a pr√°tica de um ou a de outro, o que faz sentido, visto que a maioria dos amigos que trabalha n√£o estuda e vice-versa.

Voltaremos a visitar este tema um pouco mais para frente.

---

class: inverse, center, middle

# Analisando o sono dos amigos

---

# Quanto eles dormem?

Confesso que neste momento tive um pouco de dificuldade para manipular os dados e alcan√ßar os resultados por meio de c√°lculos. Sendo assim, para conseguir resolver o meu problema, como possu√≠a um n√∫mero cont√°vel de dados, optei por calcular os resultados manualmente e inser√≠-los na seguinte tabela, apenas para demonstrar o conhecimento do conte√∫do que cobriu o pacote `reactable`.


.center[
```{r echo=FALSE}
reactable::reactable(df_tabela)
```
]

Por n√£o ser propriamente uma tabela, j√° que na verdade s√≥ tenho uma linha de informa√ß√£o, n√£o tem muito o que mostrar, mas ficam a√≠ os dados de curiosidade. Particularmente achei uma pr√°tica saud√°vel!

.footnote[
* Confesso tamb√©m que n√£o tenho tanta certeza se meus c√°lculos est√£o certos, mas o que vale √© a tabela estar a√≠ üòÖ
]
---

class: inverse, center, middle

# E no final das contas...

---

class: inverse, center, middle

# Mais horas de sono implicam em algo? 

---

# Mais horas de sono implicam em algo?

.center[
```{r echo=FALSE, message=FALSE, warning=FALSE}
df_reg |> 
  ggplot(aes(y = Dormindo, x = tempo, color = atividade)) +
  geom_point() +
  geom_smooth(method = "lm") +
  facet_wrap(vars(atividade)) +
  labs(title = "Rela√ß√£o entre o tempo gasto dormindo e as outras atividades",
       x = NULL, y = NULL) +
  theme(legend.position = "none",
        plot.title = element_text(hjust = 0.5,
                                  size = 16),
        panel.background = element_rect(fill = "#FAFAFA"),
        plot.background = element_rect(fill = "#FAFAFA"),
        panel.grid.major = element_line(colour = "gray70"))
```
]
---

# Mais horas de sono implicam em algo?

Tenho que assumir, eu tinha a hip√≥tese de que meus amigos n√£o dormiam bem, o que n√£o se comprovou nessa pesquisa.

Pensando nessa perspectiva de sono ruim (que n√£o se comprovou, parab√©ns amigos üëèüëè), eu queria entender o que eles mais estariam fazendo no lugar de dormir. Sendo assim, imaginei que a melhor forma de visualizar isso (al√©m da correla√ß√£o j√° plotada anteriormente), seria o de apresentar gr√°ficos de dispers√£o com as retas de regress√£o a eles associadas, onde o eixo `Y` representa o tempo dormindo e o `X` a outra vari√°vel observada.

Portanto, a conclus√£o de 30 segundos que podemos tirar √© que quanto mais meus amigos dormem:

Menos eles fazem tarefas dom√©sticas, menos fazem atividades f√≠sicas, mais comem, descansam mais, se deslocam menos, estudam menos, se limpam menos, se divertem mais e trabalham menos.

.footnote[
Spoiler: se voc√™ for realmente rodar as regress√µes, ver√° que nenhuma delas apresenta um resultado significativo, mas mesmo assim √© divertido olhar esses gr√°ficos.
]

---

class: inverse, center, middle

# Mas e a√≠?!?! Como √© o dia deles?

---

class: inverse, center, middle

# O t√£o esperado momento...

---
class: inverse, center, middle

# Finalmente

---
class: inverse, center, middle

# Chegou!

---

class: inverse, center, middle

## Acompanhe a seguir como se comporta um amigo m√©dio do Amilcar em seu dia...

---

# Mentira!

--

Antes precisamos explicar o gr√°fico...

--

* A hora na parte de cima representa a hora do dia

--

* Cada ponto vermelho representa um amigo do Amilcar

--

* Cada ponto azul representa uma atividade que o amigo do Amilcar pode ou n√£o estar fazendo
  * No momento da hora apresentada no t√≠tulo

--

* Se o amigo estiver realizando a atividade, haver√° uma liga√ß√£o entre ele e a atividade

--

* Para facilitar a visualiza√ß√£o de qual atividade est√° com mais pessoas naquele determinado hor√°rio, o tamanho da bolinha que representa a atividade √© influenciado pela quantidade de liga√ß√µes que possuem.

---
class: inverse, center, middle

# Agora sim!

---
class: clear, center

```{r echo=FALSE}
knitr::include_graphics("output/dia_a_dia.gif")
```

---
# Muito obrigado!

<br><br><br>

Agrade√ßo √† curso-R pelas incr√≠veis aulas, ao IBPAD por me apoiar na realiza√ß√£o deste curso, mas principalmente a todos os meus amigos e todas as minhas amigas que se dispuseram a preencher a planilha e sempre me apoiam no que eu fa√ßo!

Se em algum momento exagerei na brincadeira nesta apresenta√ß√£o, pe√ßo desculpas, e pode me cobrar que eu te devo um docinho!

---
class: inverse, center, middle

# Muito obrigado!


Amilcar L. do Prado G. Gramacho


Slides criados com o pacote [*xaringan*](https://github.com/yihui/xaringan).

.footnote[
O reposit√≥rio do Github associado a essa apresenta√ß√£o pode ser acessado [aqui.](https://github.com/amilcar-pg/dia_a_dia_amigos)
]