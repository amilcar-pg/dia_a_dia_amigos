---
title: "Dia-a-dia de um amigo do Amilcar"
subtitle: "Uma análise <s>in</s>útil sobre o amigo médio do Amilcar"
author: "Amilcar L. do Prado G. Gramacho"
institute: "curso-R: Curso de visualização de Dados"
date: "27/05/2022 (Atualizado: `r Sys.Date()`)"
output:
  xaringan::moon_reader:
    css: [default, custom.css, metropolis-fonts]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false

---

```{r importando_dados_pacotes, include=FALSE}

source("03_importando_dados.R")

library(ggplot2)

```

# Introdução

## Olá! Eu sou o Amilcar!

Finalizei o curso de visualização de dados da curso-R e montei esta apresentação como parte do trabalho final.

Ao invés de utilizar a base de dados proposta pelo curso, optei por coletar dados sobre o dia-a-dia de alguns de meus amigos, por trazer um tom talvez um pouco mais cômico ao contexto.

--

## Sobre o projeto

Inicialmente, acreditei que conseguiria replicar o gráfico ["A Day in the Life of Americans"](https://flowingdata.com/2015/12/15/a-day-in-the-life-of-americans/), mas depois de duas semanas de pesquisas intensas, precisei me adaptar à realidade do R sem o D3 para conseguir pelo menos apresentar algum tipo de gráfico neste trabalho e concorrer à bolsa proposta.

Sendo assim, a apresentação descreverá um pouco do dia-a-dia de um amigo médio do Amilcar (também conhecidos como meus amigos), e concluirá com o mais próximo que eu consegui chegar do gráfico que me motivou.
---
# Metodologia

## Coleta
Foi criada uma [planilha do google sheets](https://docs.google.com/spreadsheets/d/1Dx9Za-b1hqeiKso1E067M1BgF6VhdbGyz9FZJC662Sk/edit#gid=2051768494), onde as atividades foram previamente selecionadas por mim, para evitar a necessidade de um trabalho extensivo de limpeza de dados.

Ciente do quão intrometido eu já estava sendo ao pedir para meus amigos que me informassem o que faziam a cada parte do seu dia, optei por manter o intervalo de 15 minutos entre uma atividade e outra, por acreditar que já seria o suficiente para alcançar meu objetivo.

--

## Análise

Uma vez com os dados na mão, me debrucei sobre o desafio de recriar o gráfico mencionado anteriormente e após falhar miseravelmente percebi que precisava fazer algo mais para entregar como trabalho final. Sendo assim, para manter as amizades e poupá-las de preencher outra planilha ou formulário, optei por tentar extrair o máximo de informações possíveis do que já havia coletado.

---
class: inverse, center, middle

# Uma análise geral...

---

# O tempo gasto em cada atividade

.center[
```{r echo=FALSE}
df_boxplot <- df_people |> 
  tidyr::pivot_longer(-c(amigo),
                      names_to = "atividade",
                      values_to = "tempo")

df_boxplot |> 
  ggplot(aes(x = atividade, y = tempo, fill = atividade)) +
  geom_boxplot() +
  labs(title = "Distribuição do tempo gasto em cada atividade",
    x = NULL, y = "Unidades de tempo", fill = NULL,
    caption = "1 unidade de tempo corresponde a 15 minutos") +
  theme(legend.position = "none",
        axis.text.x = element_text(angle = 90),
        plot.title = element_text(hjust = 0.5,
                                  size = 16),
        panel.background = element_rect(fill = "#FAFAFA"),
        plot.background = element_rect(fill = "#FAFAFA"),
        panel.grid.major = element_line(colour = "gray70"))
```
]

---

# O tempo gasto em cada atividade

.center[
```{r echo=FALSE}
ggplot(df_activities) +
  aes(x = value, y = n, fill = value) +
  geom_col() +
  scale_fill_hue(direction = 1) +
  labs(
    x = NULL,
    y = "Unidades de tempo",
    title = "Soma do tempo gasto por atividade",
    caption = "1 unidade de tempo corresponde a 15 minutos"
  ) +
  theme(legend.position = "none",
        axis.text.x = element_text(angle = 90),
        plot.title = element_text(hjust = 0.5,
                                  size = 16),
        panel.background = element_rect(fill = "#FAFAFA"),
        plot.background = element_rect(fill = "#FAFAFA"),
        panel.grid.major = element_line(colour = "gray70")) +
  geom_text(aes(label = hora),
            vjust = -1)
```
]
---
# Há relação entre as atividades?

```{r echo=FALSE, fig.align='center'}
corplot <- ggplot(melted_cormat, aes(Atividade1, Atividade2, fill = value))+
  geom_tile(color = "white")+
  scale_fill_distiller(palette = "Oranges", direction = 1) +
  labs(title = "Correlação entre as atividades",
       x = NULL, y = NULL) +
  theme(legend.position = "none",
    axis.text.x = element_text(angle = 90),
        plot.title = element_text(hjust = 0.5,
                                  size = 16),
        panel.background = element_rect(fill = "#FAFAFA"),
        plot.background = element_rect(fill = "#FAFAFA"),
        panel.grid.major = element_line(colour = "gray70"))

shiny::div(
plotly::ggplotly(corplot,
                 width = 550,
                 height = 550),
align = "center")
```

---

class: inverse, center, middle

# Analisando o sono dos amigos

---

# Quanto eles dormem?

INSERIR INFORMAÇÕES:

* Média de tempo;
* Média de hora de ir dormir;
* Média de hora de acordar

---

class: inverse, center, middle

# E no final das contas...

---

class: inverse, center, middle

# Mais horas de sono implicam em algo? 

---

# Mais horas de sono implicam em algo?

.center[
```{r echo=FALSE, message=FALSE, warning=FALSE}
df_reg |> 
  ggplot(aes(y = Dormindo, x = tempo, color = atividade)) +
  geom_point() +
  geom_smooth(method = "lm") +
  facet_wrap(vars(atividade)) +
  labs(title = "Relação entre o tempo gasto dormindo e as outras atividades",
       x = NULL, y = NULL) +
  theme(legend.position = "none",
        plot.title = element_text(hjust = 0.5,
                                  size = 16),
        panel.background = element_rect(fill = "#FAFAFA"),
        plot.background = element_rect(fill = "#FAFAFA"),
        panel.grid.major = element_line(colour = "gray70"))
```
]
---

class: inverse, center, middle

# Mas e aí?!?! Como é o dia deles?

---

class: inverse, center, middle

# O tão esperado momento...

---
class: inverse, center, middle

# Finalmente

---
class: inverse, center, middle

# Chegou!

---

class: inverse, center, middle

## Acompanhe a seguir como se comporta um amigo médio do Amilcar em seu dia...

---

# Mentira!

--

Antes precisamos explicar o gráfico...

--

* A hora na parte de cima representa a hora do dia

--

* Cada ponto vermelho representa um amigo do Amilcar

--

* Cada ponto azul representa uma atividade que o amigo do Amilcar pode ou não estar fazendo
  * No momento da hora apresentada no título

--

* Se o amigo estiver realizando a atividade, haverá uma ligação entre ele e a atividade

--

* Para facilitar a visualização de qual atividade está com mais pessoas naquele determinado horário, o tamanho da bolinha que representa a atividade é influenciado pela quantidade de ligações que possuem.

---
class: inverse, center, middle

# Agora sim!

---
class: clear, center

```{r echo=FALSE}
knitr::include_graphics("output/dia_a_dia.gif")
```

---

class: inverse, center, middle

# Muito obrigado!


Amilcar L. do Prado G. Gramacho


Slides criados com o pacote [*xaringan*](https://github.com/yihui/xaringan).